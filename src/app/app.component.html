<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detectar Versão ECMAScript</title>
</head>
<body>
    <h1>Detecção de Versão ECMAScript</h1>
    <p>As versões de ECMAScript suportadas pelo seu navegador são:</p>
    <ul id="ecmascript-versions"></ul>

    <script>
        (function detectECMAScriptVersion() {
            const versions = {
                "ES5": function () {
                    return typeof Array.isArray === "function" && typeof JSON === "object";
                },
                "ES6 (ES2015)": function () {
                    try {
                        eval("const x = (a) => a; class Test {} let y = `template`;");
                        return true;
                    } catch {
                        return false;
                    }
                },
                "ES7 (ES2016)": function () {
                    return typeof Array.prototype.includes === "function";
                },
                "ES8 (ES2017)": function () {
                    return typeof Object.values === "function" && typeof async function () {} === "function";
                },
                "ES9 (ES2018)": function () {
                    return typeof Promise.prototype.finally === "function" && /(?<=b)a/.test("ba");
                },
                "ES10 (ES2019)": function () {
                    return typeof Object.fromEntries === "function" && "flat" in Array.prototype;
                },
                "ES11 (ES2020)": function () {
                    try {
                        eval("BigInt(123); globalThis; null ?? 'fallback';");
                        return true;
                    } catch {
                        return false;
                    }
                },
                "ES12 (ES2021)": function () {
                    try {
                        eval("1_000; let x = { #private: 42 }; x?.#private;");
                        return true;
                    } catch {
                        return false;
                    }
                },
            };

            const supportedVersions = [];

            for (let [version, test] of Object.entries(versions)) {
                if (test()) {
                    supportedVersions.push(version);
                }
            }

            // Atualizar o HTML
            const ul = document.getElementById("ecmascript-versions");
            supportedVersions.forEach(version => {
                const li = document.createElement("li");
                li.textContent = version;
                ul.appendChild(li);
            });
        })();
    </script>
</body>
</html>
